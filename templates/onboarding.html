{% extends "base.html" %}

{% block content %}
<div class="onboarding-container" style="max-width: 800px; margin: 3rem auto; padding: 2rem;">
    <!-- User Switch Notice -->
    <div id="logout-notice" class="encouragement-box" style="margin-bottom: 2rem; background: rgba(239, 68, 68, 0.1); border-left: 3px solid var(--accent-red);">
        <h4>‚ö†Ô∏è Cambio Utente Richiesto</h4>
        <p>Sei attualmente connesso come <strong><span id="current-user-display">Marco Rossi</span></strong>.</p>
        <p>Per creare un nuovo Noofolio, devi disconnetterti e accedere come nuovo utente.</p>
        <button onclick="logoutAndProceed()" class="btn btn-primary" style="margin-top: 1rem;">
            üîÑ Disconnetti e Procedi come Nuovo Utente
        </button>
    </div>

    <div id="onboarding-content" style="display: none;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üß†</div>
            <h1 style="font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #fff; margin-bottom: 1rem;">
                Ciao! Benvenuto su Noofolio
            </h1>
            <p style="font-size: 1.2rem; color: var(--text-muted);">
                Ti va di rispondere a un po' di domande casuali?
            </p>
        </div>

        <div class="encouragement-box" style="margin-bottom: 2rem;">
        <h4>üéØ Perch√© 30 minuti del tuo tempo?</h4>
        <p style="margin-bottom: 1rem;">
            <strong>Per fare ordine bisogna partire dal caos.</strong><br>
            Pi√π domande fai ‚Äì anche scollegate e apparentemente non utili ‚Äì pi√π il tuo Noofolio si adatter√† alla tua vera essenza professionale.
        </p>
        <p style="margin-bottom: 1rem;">
            Se rispondi bene alle domande, troverai un <strong>chatbot NooMe</strong> pi√π istruito su di te.
        </p>
        <p style="margin-bottom: 1rem; padding: 0.75rem; background: rgba(99, 102, 241, 0.1); border-left: 3px solid var(--primary); border-radius: 4px;">
            ‚è≠Ô∏è <strong>Tutte le domande sono facoltative!</strong> Puoi skippare e andare avanti quando vuoi. Ovviamente, a pi√π domande rispondi, migliore sar√† il risultato finale.
        </p>
        <p style="margin-bottom: 0; font-size: 0.9rem; color: var(--text-dim);">
            üí° <em>I NooMe hanno diversi livelli di affidabilit√†. I NooMe di persone che hanno risposto a tante domande e fatto correzioni avranno un punteggio di affidabilit√† pi√π alto.</em>
        </p>
    </div>

    <div style="background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-bottom: 2rem;">
        <h3 style="color: var(--primary-light); margin-bottom: 1.5rem; font-size: 1.3rem;">
            üìä Cosa otterrai:
        </h3>
        
        <div style="display: grid; gap: 1rem;">
            <div style="display: flex; gap: 1rem; align-items: start;">
                <span style="font-size: 1.5rem;">üé®</span>
                <div>
                    <strong style="color: var(--text);">Portfolio personalizzato</strong>
                    <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0.25rem 0 0 0;">
                        Non un CV. Una mappa del tuo pensiero, decisioni, fallimenti e unicit√†.
                    </p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: start;">
                <span style="font-size: 1.5rem;">ü§ñ</span>
                <div>
                    <strong style="color: var(--text);">NooMe - Il tuo clone AI</strong>
                    <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0.25rem 0 0 0;">
                        Un chatbot che risponde come te, disponibile 24/7 per recruiter e collaboratori.
                    </p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: start;">
                <span style="font-size: 1.5rem;">üèÜ</span>
                <div>
                    <strong style="color: var(--text);">Punteggio affidabilit√†</strong>
                    <p style="color: var(--text-muted); font-size: 0.9rem; margin: 0.25rem 0 0 0;">
                        Pi√π domande rispondi e correggi il tuo NooMe, pi√π alto sar√† il tuo score.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(34, 211, 238, 0.1)); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 16px; padding: 2rem; margin-bottom: 2rem;">
        <h3 style="color: var(--accent); margin-bottom: 1rem; font-size: 1.2rem;">
            ‚ö° Scegli il tuo percorso:
        </h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border);">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üöÄ</div>
                <h4 style="color: var(--text); margin-bottom: 0.5rem;">Express Mode</h4>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 1rem;">
                    5 domande essenziali<br>
                    ‚è±Ô∏è ~5 minuti<br>
                    NooMe affidabilit√†: ‚≠ê‚≠ê
                </p>
                <a href="/create/express" class="btn btn-secondary" style="width: 100%; text-align: center;">
                    Veloce
                </a>
            </div>
            
            <div style="background: var(--bg-card); padding: 1.5rem; border-radius: 12px; border: 2px solid var(--primary);">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üéØ</div>
                <h4 style="color: var(--primary-light); margin-bottom: 0.5rem;">Deep Mode</h4>
                <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 1rem;">
                    10 step approfonditi<br>
                    ‚è±Ô∏è ~30 minuti<br>
                    NooMe affidabilit√†: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                </p>
                <a href="/create" class="btn btn-primary" style="width: 100%; text-align: center;">
                    Completo (Consigliato)
                </a>
            </div>
        </div>
    </div>

        <div style="text-align: center; color: var(--text-dim); font-size: 0.9rem;">
            <p>üíæ Puoi sempre salvare e continuare dopo.</p>
        </div>
    </div>
</div>

<script>
// Check if user is logged in
document.addEventListener('DOMContentLoaded', function() {
    const currentUser = sessionStorage.getItem('current_user');
    if (currentUser) {
        document.getElementById('current-user-display').textContent = currentUser;
        document.getElementById('logout-notice').style.display = 'block';
        document.getElementById('onboarding-content').style.display = 'none';
    } else {
        document.getElementById('logout-notice').style.display = 'none';
        document.getElementById('onboarding-content').style.display = 'block';
    }
});

function logoutAndProceed() {
    // Remove current user
    sessionStorage.removeItem('current_user');
    sessionStorage.setItem('current_user', 'Nuovo Utente');

    // Update navbar
    updateNavbar('Nuovo Utente');

    // Show onboarding content
    document.getElementById('logout-notice').style.display = 'none';
    document.getElementById('onboarding-content').style.display = 'block';
}

function updateNavbar(userName) {
    // Trigger a custom event to update navbar
    window.dispatchEvent(new CustomEvent('userChanged', { detail: { userName: userName } }));
}
</script>
{% endblock %}